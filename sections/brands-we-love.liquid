{%- comment -%}
***************************************************************
PLEASE NOTE: Do not change this file! 
This theme is managed by the Replica app. 
Any manual changes may be automatically overwritten at any time.
3rd PARTY APP DEVELOPERS BEWARE WITH INSTALLS!
Modify at your own peril, a broken website is the likely result.
***************************************************************
{%- endcomment -%}

<section class="logolist-mobile-space">
  <hr>
  {% if section.settings.title != blank and section.settings.center_align_items == true %}
  <div class="section-header center_align_brand_header">
    <h2 class="h2  section-header--left">
      {{ section.settings.title | escape }}
    </h2>
  </div>
  {% else %}
  <div class="section-header">
    <h2 class="h2  section-header--left">
      {{ section.settings.title | escape }}
    </h2>
  </div>
  {% endif %}

  {% if section.settings.slick %}<!-- Carousel Setting -->
    <div class="logolist--inner responsive-{{ section.id }} flex" style="margin-left:40px;margin-right:40px;" >
    {% for block in section.blocks %}
      <div class="logo-flex-item" {{ block.shopify_attributes }}>
        {% if block.settings.link != blank %}
          <a href="{{ block.settings.link | escape }}" {% if block.settings.new_window == true %}target="_blank"{% endif %}> 
        {% endif %}

        {% if block.settings.image %}
          {%
            include 'rimg',
            img: block.settings.image,
            size: '200x200',
            lazy: false,
            canvas: true,
            alt: block.settings.brand_title
          %}
        {% else %}
          <img src="https://149596302.v2.pressablecdn.com/wp-content/uploads/newmediaretailer-logo.jpg" alt="nmr logo">
        {% endif %}
            <h3 class="brands-title">{{ block.settings.brand_title }}</h3>

        {% if block.settings.link != blank %}
          </a>
        {% endif %}
      </div>
    {% endfor %}
  </div>  
  {% comment %}
  Script to load the slick slider functionality with responsive 
  {% endcomment %}  
 <script>
  $(document).ready(function(){
    var itemCount = $('.responsive-{{ section.id }} .logo-flex-item').length;
    var showDots = itemCount >= 7;

    $('.responsive-{{ section.id }}').slick({
      dots: showDots,
      arrows: true,
      infinite: true,
      speed: 300,
      slidesToShow: 6,
      slidesToScroll: 6,
      responsive: [
        {
          breakpoint: 1024,
          settings: {
            slidesToShow: 6,
            slidesToScroll: 6,
            infinite: true,
            dots: showDots
          }
        },
        {
          breakpoint: 600,
          settings: {
            slidesToShow: 3,
            slidesToScroll: 3,
            dots: showDots
          }
        },
        {
          breakpoint: 480,
          settings: {
            slidesToShow: 1,
            slidesToScroll: 1,
            dots: showDots
          }
        }
      ]
    });
  });
</script>

  {% elsif section.settings.center_align_items == true %}
  <div class="grid flex-container logolist--inner">
    {% for block in section.blocks %}
      <div class="grid-item one-half medium--one-third large--one-sixth" {{ block.shopify_attributes }}>
        {% if block.settings.link != blank %}
          <a href="{{ block.settings.link | escape }}" {% if block.settings.new_window == true %}target="_blank"{% endif %}>
        {% endif %}

        {% if block.settings.image %}
          {%
            include 'rimg',
            img: block.settings.image,
            size: '200x200',
            lazy: false,
            canvas: true,
            alt: block.settings.brand_title
          %}
        {% else %}
          <img src="https://149596302.v2.pressablecdn.com/wp-content/uploads/newmediaretailer-logo.jpg" alt="nmr logo">
        {% endif %}
            <h3 class="brands-title">{{ block.settings.brand_title }}</h3>

        {% if block.settings.link != blank %}
          </a>
        {% endif %}
      </div>
    {% endfor %}
  </div>
    
  {% else %}<!-- Standard Setting -->
  <div class="grid logolist--inner">
    {% for block in section.blocks %}
      <div class="grid-item one-half medium--one-third large--one-sixth" {{ block.shopify_attributes }}>
        {% if block.settings.link != blank %}
          <a href="{{ block.settings.link | escape }}" {% if block.settings.new_window == true %}target="_blank"{% endif %}>
        {% endif %}

        {% if block.settings.image %}
          <div class="flex items-center justify-center" style="height:6rem;">
            {%
              include 'rimg', 
              img: block.settings.image,
              size: '200x200',
              lazy: false,
              canvas: true,
              alt: block.settings.brand_title
            %}
          </div>
        {% else %}
          <img src="https://149596302.v2.pressablecdn.com/wp-content/uploads/newmediaretailer-logo.jpg" alt="nmr logo">
        {% endif %}
            <h4>{{ block.settings.brand_title }}</h4>

        {% if block.settings.link != blank %}
          </a>
        {% endif %}
      </div>
    {% endfor %}
  </div>
 {% endif %}
</section>


{% schema %}
{
  "name": "Logo list",
  "class": "logolist--section",
  "max_blocks": 18,
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Brands We Love"
    },
    {
      "type": "checkbox",
      "id": "center_align_items",
      "label": "Center Align Items",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "slick",
      "label": "Carousel"
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "settings": [
        {
          "id": "image",
          "type": "image_picker",
          "label": "Image",
          "info": "320 x 320px .png recommended"
        },
        {
          "type": "text",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "checkbox",
          "id": "new_window",
          "label": {
            "en": "Open link in a new window"
            },
            "default": false
        },
        {
          "type": "text",
          "id": "brand_title",
          "label": "Brand title"
        }
      ]
    }
  ],
  "presets": [
    {
      "category": "Image",
      "name": "Logo list",
      "blocks": [
        {
          "type": "logo"
        },
        {
          "type": "logo"
        },
        {
          "type": "logo"
        },
        {
          "type": "logo"
        }
      ]
    }
  ]
}
{% endschema %}